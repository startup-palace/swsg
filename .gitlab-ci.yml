variables:
  DEBIAN_FRONTEND: noninteractive
  COURSIER_VERSION: 1.0.0-RC6

.scala-job: &scala
  image: hseeberger/scala-sbt
  before_script:
    - mkdir -p ~/.sbt/0.13/plugins
    - echo "addSbtPlugin(\"io.get-coursier\" % \"sbt-coursier\" % \"$COURSIER_VERSION\")" >> ~/.sbt/0.13/plugins/coursier.sbt
    - java -version
    - javac -version

compile:
  <<: *scala
  stage: build
  script:
    - ./sbt compile
  artifacts:
    name: "$CI_JOB_NAME-$CI_COMMIT_SHA"
    paths:
      - project/project/
      - project/target/
      - target/
    expire_in: 1 day
  tags:
    - docker

unit:
  <<: *scala
  stage: test
  script:
    - ./sbt test
  tags:
    - docker
